#!/usr/bin/env node

// Pre-rebase hook - creates checkpoint before rebase
const path = require('path');
const defaultRoot = path.join(__dirname, '..', '..');
const configuredRoot = process.env.EASEGIT_PACKAGE_ROOT || "__EASEGIT_PACKAGE_ROOT__";
const packageRoot = configuredRoot.startsWith('__EASEGIT_PACKAGE_ROOT__') ? defaultRoot : configuredRoot;
const { createCheckpoint } = require(path.join(packageRoot, 'dist', 'snapshot', 'create'));

createCheckpoint('rebase');
